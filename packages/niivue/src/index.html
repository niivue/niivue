<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>NiiVue â€” minimal HDR/IMG loader</title>
    <link rel="stylesheet" href="niivue.css" />
    <style>
      html, body, #canvas-container, canvas {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        background: #000;
        display: block;
      }
    </style>
  </head>
  <body>
    <main id="canvas-container">
      <canvas id="gl1"></canvas>
    </main>

    <script type="module" async>
      import { Niivue, SHOW_RENDER, DRAG_MODE, SLICE_TYPE } from './niivue/index.ts'

      // Minimal default options
      const defaults = {
        backColor: [0, 0, 0, 1],
        loglevel: 'info',
        show3Dcrosshair: false,
        isColorbar: true,
        dragMode: DRAG_MODE.none
      }

      const nv1 = new Niivue(defaults)

      try {
        // attach to canvas with id 'gl1'
        await nv1.attachToCanvas(gl1)

        // prefer multiplanar layout for simple viewing
        nv1.opts.multiplanarShowRender = SHOW_RENDER.AUTO
        nv1.opts.yoke3Dto2DZoom = true

        // HDR/.img pair: url => header (.hdr), urlImgData => raw image (.img)
        const volumeList = [
          {
            url: '../demos/images/RAS.hdr',
            urlImgData: '../demos/images/RAS.img',
            colormap: 'gray',
          }
        ]

        // load the volume (loader should use urlImgData for the img bytes)
        await nv1.loadVolumes(volumeList)

        // set multiplanar (3-panel) view for immediate rendering
        nv1.setSliceType(nv1.sliceTypeMultiplanar || SLICE_TYPE.MULTIPLANAR)

        // redraw to ensure display
        nv1.drawScene()

      } catch (err) {
        console.error('Error initializing Niivue or loading volume:', err)
      }
    </script>
  </body>
</html>
