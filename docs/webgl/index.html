<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-webgl" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">WebGL2 | NiiVue</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://niivue.com/docs/webgl"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="WebGL2 | NiiVue"><meta data-rh="true" name="description" content="This project requires WebGL2. This specification was finalized in January 2017. It is supported by all popular modern browsers. NiiVue exploits WebGL2 features that are not available in WebGL1. Specifically, the images are represented using non-Power of two 3D textures. The shaders used by WebGL2 are written using the OpenGL ES 3.0 version of the OpenGL Shading Language (GLSL). WebGL2 added additional texture formats that provide native support for most NIfTI format data types."><meta data-rh="true" property="og:description" content="This project requires WebGL2. This specification was finalized in January 2017. It is supported by all popular modern browsers. NiiVue exploits WebGL2 features that are not available in WebGL1. Specifically, the images are represented using non-Power of two 3D textures. The shaders used by WebGL2 are written using the OpenGL ES 3.0 version of the OpenGL Shading Language (GLSL). WebGL2 added additional texture formats that provide native support for most NIfTI format data types."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://niivue.com/docs/webgl"><link data-rh="true" rel="alternate" href="https://niivue.com/docs/webgl" hreflang="en"><link data-rh="true" rel="alternate" href="https://niivue.com/docs/webgl" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.52a0863d.css">
<script src="/assets/js/runtime~main.dd05810d.js" defer="defer"></script>
<script src="/assets/js/main.e089779e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_G6ar" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">NiiVue</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/gallery">Gallery</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/niivue/niivue" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_awgD"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_OLSw colorModeToggle_Hg9V"><button class="clean-btn toggleButton_wYmb toggleButtonDisabled_vaDU" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_Sxwe"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Yem1"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_bmvg"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_UyTV"><div class="docsWrapper_XLvK"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_z1FD" type="button"></button><div class="docRoot_HciC"><aside class="theme-doc-sidebar-container docSidebarContainer_e5ai"><div class="sidebarViewport_N8x0"><div class="sidebar_vJCc"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_qiME"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/loading">Loading Volumes and Meshes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/colormaps">Using Colormaps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ct">CT Colormaps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/colormaps2">Custom Colormaps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/layouts">Layouts and Slice Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/options">Options Watching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/thresholding">Statistical Thresholding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/drawing">Drawing and Segmentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/syncing">Synchronizing Multiple Views</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mesh">Meshes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/atlas">Atlases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/fonts">Fonts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/gestures">Gestures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dicom">DICOM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/plugins">Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/develop">Development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/webgl">WebGL2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contribute">Contribute</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/api/">API v0.61.0</a><button aria-label="Expand sidebar category &#x27;API v0.61.0&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_namt"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_YAwJ"><div class="docItemContainer_Rv5Z"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_zCmv" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_JFrk"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">WebGL2</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_O_Qc theme-doc-toc-mobile tocMobile_tjDr"><button type="button" class="clean-btn tocCollapsibleButton_htYj">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>WebGL2</h1></header><p>This project requires WebGL2. This specification was <a href="https://en.wikipedia.org/wiki/WebGL" target="_blank" rel="noopener noreferrer">finalized in January 2017</a>. It is supported by <a href="https://caniuse.com/webgl2" target="_blank" rel="noopener noreferrer">all popular modern browsers</a>. NiiVue exploits WebGL2 features that <a href="https://webgl2fundamentals.org/webgl/lessons/webgl2-whats-new.html" target="_blank" rel="noopener noreferrer">are not available in WebGL1</a>. Specifically, the images are represented using non-Power of two 3D textures. The shaders used by WebGL2 are written using the <a href="https://en.wikipedia.org/wiki/OpenGL_ES" target="_blank" rel="noopener noreferrer">OpenGL ES 3.0</a> version of the <a href="https://en.wikipedia.org/wiki/OpenGL_Shading_Language" target="_blank" rel="noopener noreferrer">OpenGL Shading Language (GLSL)</a>. WebGL2 added additional texture formats that provide native support for most <a href="https://brainder.org/2012/09/23/the-nifti-file-format/" target="_blank" rel="noopener noreferrer">NIfTI format data types</a>.</p>
<p>WebGL2 is a <a href="https://webgl2fundamentals.org/webgl/lessons/webgl-shaders-and-glsl.html" target="_blank" rel="noopener noreferrer">shader-based</a> language. NiiVue includes many in-built shaders - the pull-down menu below allows you to explore a few of these. In addition, you can write your own custom shaders, as showcased in <a href="https://niivue.com/demos/features/mesh.atlas.html" target="_blank" rel="noopener noreferrer">this live demo</a>.</p>
<div>Loading...</div>
<p>NiiVue uses WebGL not only to display images but also to accelerate many of the functions. For example, the <a href="http://pieper.github.io/sites/glimp/growcut.html" target="_blank" rel="noopener noreferrer">grow cut</a> drawings and the image reslicing described below.</p>
<h5 class="anchor anchorWithStickyNavbar_fF9Z" id="strengths-and-weaknesses">Strengths and Weaknesses<a href="#strengths-and-weaknesses" class="hash-link" aria-label="Direct link to Strengths and Weaknesses" title="Direct link to Strengths and Weaknesses">​</a></h5>
<p>WebGL is a modern shader-based language. It lacks the fixed function pipeline, quad primitives and helper functions of legacy OpenGL. The benefit of this approach is that it forces the developer to use efficient methods that map closely to modern hardware design. However, it does have a steep learning curve. The minimal design of WebGL allows <a href="https://en.wikipedia.org/wiki/ANGLE" target="_blank" rel="noopener noreferrer">ANGLE</a> to map it directly to the most efficient graphics library available (METAL, Vulkan, DirectX or Modern OpenGL). However, as it was designed as the least common denominator between these competing libraries, it does lack some useful features like geometry shaders. Therefore, one must adopt alternative approaches to implement features such as <a href="https://github.com/niivue/niivue/issues/458" target="_blank" rel="noopener noreferrer">wireframes and illuminated streamlines</a>. It also lacks <a href="https://github.com/niivue/niivue/issues/447" target="_blank" rel="noopener noreferrer">clip planes</a> and the <a href="https://github.com/niivue/niivue/issues/345" target="_blank" rel="noopener noreferrer">depth buffer is read only</a>.</p>
<p>While the emerging WebGPU has not yet been finalized, it can provide better performance than WebGL2, in particular when there are a huge number of draw calls. However, NiiVue is designed to only require a handful of draw calls, and therefore the visualization is already well optimized for modern devices. On the other hand, WebGPU can provide a huge boost for AI models, and we illustrate this potential with our <a href="https://github.com/niivue/niivue-tinygrad" target="_blank" rel="noopener noreferrer">tinygrad</a> and <a href="https://github.com/niivue/niivue-onnx" target="_blank" rel="noopener noreferrer">ONNX</a> implementations of the brain chop models.</p>
<h5 class="anchor anchorWithStickyNavbar_fF9Z" id="textures">Textures<a href="#textures" class="hash-link" aria-label="Direct link to Textures" title="Direct link to Textures">​</a></h5>
<p>The term Textures refers to bitmap images that are stored on the graphics card. WebGL2 can support 1D, 2D, and 3D textures. The WebGL context can only have a limited number of textures active at one time (with the command <code>activeTexture</code> deterimining which textures are available). A WebGL 2 context provides a minimum of <a href="https://webgl2fundamentals.org/webgl/lessons/webgl-cross-platform-issues.html#device-limits" target="_blank" rel="noopener noreferrer">32 total loaded textures, with a fragment program able to access at least 16 concurrently</a>. You can think of these active textures as slots that are available for the shaders to access. NiiVue consistently uses the same slots for specific textures. While this is not required by WebGL, it simplifies the code (e.g. otherwise many calls to bind textures to specific slots of the style <code>gl.activeTexture(gl.TEXTURE2); gl.bindTexture(gl.TEXTURE_3D, this.overlayTexture)</code>). This means that each draw call does not need to explicitly set the active textures. Therefore, slots 0..8 should be considered reserved and if required these slots should be returned to the intended use when not needed. The code currently uses slots 9..15 transiently, so these could be easily used by other functions.</p>
<ul>
<li><code>TEXTURE0_BACK_VOL</code>: Background volume. This 3D scalar bitmap stores the voxel intensities of the background image.</li>
<li><code>TEXTURE1_COLORMAPS</code>: Active colormaps. This 2D RGBA bitmap converts the scalar volume voxel intensities to RGBA values (e.g. Grayscale, Viridis). Note that each voxelwise layer can have two unique colormaps (for positive and negative values) and meshes can also have colormaps.</li>
<li><code>TEXTURE2_OVERLAY_VOL</code>: Overlay volumes. This 3D RGBA bitmap stores the blended values of all loaded overlays.</li>
<li><code>TEXTURE3_FONT</code>: Font. This is a 2D bitmap that stores the <a href="https://github.com/Chlumsky/msdfgen" target="_blank" rel="noopener noreferrer">multi-channel signed distance field typeface</a>.</li>
<li><code>TEXTURE4_THUMBNAIL</code>: Thumbnail. This is a 2D bitmap that can be rapidly displayed. When a user clicks on the thumbnail the (large and slow) volumes and meshes will be loaded.</li>
<li><code>TEXTURE5_MATCAP</code>: Matcap. This is a 2D bitmap used for exclusively by the matcap mesh shader (transiently enabled with the shader, so available for other functions). It is also used as a temporary 2D texture: this is used to blend multiple overlays into a single texture (TEXTURE2).</li>
<li><code>TEXTURE6_GRADIENT</code>: Gradient texture for <a href="https://niivue.com/demos/features/shiny.volumes.html" target="_blank" rel="noopener noreferrer">shiny volume rendering shaders</a> that use a gradient map for lighting.</li>
<li><code>TEXTURE7_DRAW</code>: Drawing texture: this stores any active drawing, having the same resolution as TEXTURE0.</li>
<li><code>TEXTURE8_PAQD</code>: Probability Atlas Quad Datatype provides a compact encoding for probability atlases.</li>
<li><code>TEXTURE8_GRADIENT_TEMP</code>: Transient texture used when generating TEXTURE6_GRADIENT.</li>
<li><code>TEXTURE9_ORIENT</code>: Transient texture used when re-orienting voxel-based volumes to RAS orientation.</li>
<li><code>TEXTURE10_BLEND</code>: Transient texture for blending different overlay volumes into the single TEXTURE2_OVERLAY_VOL.</li>
<li><code>TEXTURE11_GC_BACK</code>: Transient texture used <a href="https://niivue.com/demos/features/draw2.html" target="_blank" rel="noopener noreferrer">growcut</a> shader: background voxel intensity.</li>
<li><code>TEXTURE12_GC_STRENGTH0</code>: Transient texture used <a href="https://niivue.com/demos/features/draw2.html" target="_blank" rel="noopener noreferrer">growcut</a> shader: edge strength that ping-pongs between read and write.</li>
<li><code>TEXTURE13_GC_STRENGTH1</code>: Transient texture used <a href="https://niivue.com/demos/features/draw2.html" target="_blank" rel="noopener noreferrer">growcut</a> shader: edge strength that ping-pongs between write and read.</li>
<li>`TEXTURE14_GC_LABEL0: Transient texture used <a href="https://niivue.com/demos/features/draw2.html" target="_blank" rel="noopener noreferrer">growcut</a> shader: drawing color that ping-pongs between read and write.</li>
<li><code>TEXTURE15_GC_LABEL1</code>: Transient texture used <a href="https://niivue.com/demos/features/draw2.html" target="_blank" rel="noopener noreferrer">growcut</a> shader: drawing color that ping-pongs between write and read.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_fF9Z" id="overlays">Overlays<a href="#overlays" class="hash-link" aria-label="Direct link to Overlays" title="Direct link to Overlays">​</a></h5>
<p>Overlay images are resliced to match the resolution of the background image. Multiple overlays may be loaded, but they are all blended together to generate a single RGBA texture. This overcomes WebGL limits on the number of active textures loaded, and improves the speed of rendering.</p>
<p>JavaScript is slower than natively compiled programs for many computations, <a href="http://openglinsights.com/discovering.html#WebGLforOpenGLDevelopers" target="_blank" rel="noopener noreferrer">using WebGL can dramatically increase performance providing near native performance</a>. Therefore, while using the GPU instead of the CPU can accelerate performance regardless of language, the benefits are greater for JavaScript. Reslicing 3D volumes is compute intensive. Specifically, the GPU-based WebGL reslicing algorithm is also about an order of magnitude faster than the standard JavaScript code.</p>
<p>The reslicing algorithm uses the <a href="https://www.khronos.org/registry/OpenGL-Refpages/es3.0/html/glTexStorage3D.xhtml" target="_blank" rel="noopener noreferrer">R8UI, R16I, R16UI and R32F</a> base formats for the <a href="https://nifti.nimh.nih.gov/pub/dist/src/niftilib/nifti1.h" target="_blank" rel="noopener noreferrer">NIfTI</a> <code>DT_UINT8</code>, <code>DT_INT16</code>, <code>DT_UINT16</code>, and <code>DT_FLOAT32</code> datatypes. One limitation of WebGL is that these texture formats are not <a href="https://webgl2fundamentals.org/webgl/lessons/webgl-data-textures.html" target="_blank" rel="noopener noreferrer">filterable</a>, meaning that only <a href="https://open.gl/textures" target="_blank" rel="noopener noreferrer">nearest</a> interpolation is available. Therefore, overlays may appear blocky if there is not a one-to-one correspondence between the background image and an overlay. On the other hand, this is often desired for thresholded statistical maps (where many voxels are artificially zeroed). Another quirk of WebGL is that three shader programs are required to support unsigned integer, signed integer and floating point textures (using <code>usampler3D</code>, <code>isampler3D</code> and <code>sampler3D</code> respectively).</p>
<p>A GLSL compute shader applies a 4×4 affine transformation matrix to map the overlay image onto the background volume. Since WebGL operates on 2D framebuffers, the shader processes one 2D slice of the 3D background volume at a time. This approach leverages standard WebGL2 functionality and does not rely on emerging <a href="https://www.khronos.org/registry/webgl/specs/latest/2.0-compute/" target="_blank" rel="noopener noreferrer">WebGL or WebGPU compute extensions</a>.</p>
<h5 class="anchor anchorWithStickyNavbar_fF9Z" id="future-directions">Future Directions<a href="#future-directions" class="hash-link" aria-label="Direct link to Future Directions" title="Direct link to Future Directions">​</a></h5>
<p>This section describes methods that could enhance NiiVue visualization. Each will require development resources and the complexity impacts the simplicity and maintainability of NiiVue. Further, each impacts performance which may impact the experience on low-powered devices. Therefore, if implemented they would likely be optional effects.</p>
<ul>
<li><a href="https://github.com/niivue/niivue/issues/458" target="_blank" rel="noopener noreferrer">Barycentric Effects</a> could allow wire-frame visualization. As WebGL lacks geometry shaders, implementing these effects is possible but has performance implications.</li>
<li><a href="https://github.com/niivue/niivue/issues/458" target="_blank" rel="noopener noreferrer">Streamline Effects</a> can enhance the appearance of fibers. As WebGL does not include geometry shaders, <a href="https://www.researchgate.net/publication/319441378_A_Simple_and_Efficient_Cylinder_Imposter_Approach_to_Visualize_DTI_Fiber_Tracts" target="_blank" rel="noopener noreferrer">imposters could be used</a>. This method has performance implications.</li>
<li>Ambient Occlusion models how valleys (e.g. sulci) are more shaded from light than ridges (gyri). <a href="https://volview.netlify.app/" target="_blank" rel="noopener noreferrer">VolView</a> provides <a href="https://github.com/Kitware/vtk-js/blob/dd45c408217e5d632de0ff98f45765abf92daba8/Sources/Rendering/OpenGL/glsl/vtkVolumeFS.glsl#L768" target="_blank" rel="noopener noreferrer">one JavaScript approach</a>, <a href="https://ieeexplore.ieee.org/abstract/document/4840341" target="_blank" rel="noopener noreferrer">Hernell</a> provides another approach. One method may be to use a blurred opacity map to simulate shading. All these approaches have performance implications.</li>
<li>The desktop-based <a href="https://community.mrtrix.org/t/streamlines-tractography-output-problem/903/8" target="_blank" rel="noopener noreferrer">mrtrix</a> and <a href="https://sites.google.com/a/labsolver.org/dsi-studio/Manual/odf-visualization" target="_blank" rel="noopener noreferrer">dsi-studio</a> can display Orientation Distribution Functions that allow users to evaluate the quality of diffusion data. Developing similar functionality for the web would be useful. These methods have performance implications.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_fF9Z" id="links">Links<a href="#links" class="hash-link" aria-label="Direct link to Links" title="Direct link to Links">​</a></h5>
<ul>
<li><a href="https://webglinsights.github.io/index.html" target="_blank" rel="noopener noreferrer">WebGL Insights</a> is free and a terrific resource.</li>
<li><a href="https://webgl2fundamentals.org/" target="_blank" rel="noopener noreferrer">WebGL2 Fundamentals</a> provides outstanding tutorials.</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/develop"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Development</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/contribute"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Contribute</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_TN1Q thin-scrollbar theme-doc-toc-desktop"></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/niivue/niivue/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_awgD"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Recipes</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/gallery">Gallery</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/niivue/niivue" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_awgD"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 NiiVue authors</div></div></div></footer></div>
</body>
</html>